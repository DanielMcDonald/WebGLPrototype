<!DOCTYPE html>
<html>
  <head>
    <title>
      CubicVR.js: Utilizing the CubicVR.Mesh build() procedure for construction
    </title>
    <script src="CubicVR.js" type="text/javascript">
    </script>
    <script type='text/javascript'>
      function buildMesh() {  
       var material1 = new CubicVR.Material({
          textures: {
            color: "1.jpg"
          }
        });

       var mesh = new CubicVR.Mesh({  
          points:[
            [-0.2, -0.2, 0.5],
            [0.2, -0.2, 0.5],
            [0.2, 0.2, 0.5],
            [-0.2, 0.2, 0.5],
            [-0.5, 0.2, 0],
            [-0.5, -0.2, 0],
            [0.5, 0.2, 0],
            [0.5, -0.2, -0],
            [-0.2, -0.2, -0.5],
            [-0.2, 0.2, -0.5],
            [0.2, -0.2, -0.5],
            [0.2, 0.2, -0.5],
            [-0.5, 0.2, -0.25],
            [-0.5, -0.2, -0.25],
            [-0.5, 0.2, 0.25],
            [-0.5, -0.2, 0.25],
            [0.5, 0.2, -0.25],
            [0.5, -0.2, -0.25],
            [0.5, 0.2, 0.25],
            [0.5, -0.2, 0.25]

          ],
          faces:[
            [0,1,2,3],
            [13,12,9,8],
            [2,1,19,18],
            [18,19,17,16],
            [16,17,10,11],
            [0,3,14,15],
            [15,14,12,13],
            [8,9,11,10],
            [16,11,9,12],
            [2,18,14,3],
            [18,16,12,14],
            [10,17,13,8],
            [0,15,19,1],
            [15,13,17,19]

          ],
          uv:[
           [[0,1],[1,1],[1,0],[0,0]],
           [[0,1],[1,1],[1,0],[0,0]],
           [[0,1],[1,1],[1,0],[0,0]],
           [[0,1],[1,1],[1,0],[0,0]],
           [[0,1],[1,1],[1,0],[0,0]],
           [[0,1],[1,1],[1,0],[0,0]],
           [[0,1],[1,1],[1,0],[0,0]],
           [[0,1],[1,1],[1,0],[0,0]],
           [[0,1],[1,1],[1,0],[0,0]],
           [[0,1],[1,1],[1,0],[0,0]],
           [[0,1],[1,1],[1,0],[0,0]],
           [[0,1],[1,1],[1,0],[0,0]],
           [[0,1],[1,1],[1,0],[0,0]],
           [[0,1],[1,1],[1,0],[0,0]]
          ],
         compile:true
       });
      mesh.setFaceMaterial(material1, 0);
      mesh.prepare();
      return mesh;
      }
      
      
      function webGLStart() {
        // by default generate a full screen canvas with automatic resize
        var gl = CubicVR.init();
        var canvas = CubicVR.getCanvas();
        
        if (!gl) {
          alert("Sorry, no WebGL support.");
          return;
        };
        
        // New scene with our canvas dimensions and default camera with FOV 80
        var scene = new CubicVR.Scene(canvas.width, canvas.height, 80);
        
        // set initial camera position and target
        scene.camera.position = [0,0, 1];
        scene.camera.target = [0, 0, 0];
        
        // Add our scene to the window resize list
        CubicVR.addResizeable(scene);
        
        // build our mesh
        var testMesh = buildMesh();
        // construct a SceneObject and bind the mesh to it
        var sceneObject = new CubicVR.SceneObject({mesh: testMesh});
        
        // bind our sceneObject to the scene
        scene.bind(sceneObject);
        
        // Add a simple directional light
      var light1 = new CubicVR.Light({
           type: "point",
           method: "dynamic",
           diffuse: [1,1,1],
           specular: [1,1,1],
           position: [-5,-5,-10],
           distance: 50
        });
         var light2 = new CubicVR.Light({
           type: "point",
           method: "dynamic",
           diffuse: [1,1,1],
           specular: [1,1,1],
           position: [5 ,5,-10],
           distance: 50
        });
         var light3 = new CubicVR.Light({
           type: "point",
           method: "dynamic",
           diffuse: [1,1,1],
           specular: [1,1,1],
           position: [-5,5,-10],
           distance: 50
        });
        var light4 = new CubicVR.Light({
           type: "point",
           method: "dynamic",
           diffuse: [1,1,1],
           specular: [1,1,1],
           position: [5,-5,-10],
           distance: 50
        });
          
          var light5 = new CubicVR.Light({
           type: "point",
           method: "dynamic",
           diffuse: [1,1,1],
           specular: [1,1,1],
           position: [5,5,10],
           distance: 50
        });
         var light6 = new CubicVR.Light({
           type: "point",
           method: "dynamic",
           diffuse: [1,1,1],
           specular: [1,1,1],
           position: [-5,5,10],
           distance: 50
        });
         var light7 = new CubicVR.Light({
           type: "point",
           method: "dynamic",
           diffuse: [1,1,1],
           specular: [1,1,1],
           position: [-5,-5,10],
           distance: 50
        });
         var light8 = new CubicVR.Light({
           type: "point",
           method: "dynamic",
           diffuse: [1,1,1],
           specular: [1,1,1],
           position: [5,-5,10],
           distance: 50
        });
        
        scene.bindLight(light1);
        scene.bindLight(light2);
        scene.bindLight(light3);
        scene.bindLight(light5);
        scene.bindLight(light6);
        scene.bindLight(light7);
        scene.bindLight(light8);

        // initialize a mouse view controller
        var mvc = new CubicVR.MouseViewController(canvas, scene.camera);
        
        // Start our main drawing loop, it provides a timer and the gl context as parameters
        CubicVR.MainLoop(function(timer, gl) {
          scene.render();
        });
      }
    </script>
  </head>
  <body onLoad="webGLStart();"></body>
</html>
