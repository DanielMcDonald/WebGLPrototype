<!DOCTYPE html>
<html>
  <head>
    <title>
      CubicVR.js: Utilizing the CubicVR.Mesh build() procedure for construction
    </title>
    <script src="CubicVR.js" type="text/javascript">
    </script>
    <script type='text/javascript'>
      function buildMesh() {  
       return new CubicVR.Mesh({
         
          points:[
            [-1, -1, 1],
            [1, -1, 1],
            [1, 1, 1],
            [-1, 1, 1],
            [-2, 1, -1],
            [-2, -1, -1],
            [2, 1, -1],
            [2, -1, -1] 
          ],
          faces:[
            [0,1,2,3],
            [0,3,4,5],
            [2,1,7,6],
            [5,4,6,7]
          ],
          uv:[
           [[0,1],[1,1],[1,0],[0,0]],
           [[0,1],[1,1],[1,0],[0,0]],
           [[0,1],[1,1],[1,0],[0,0]],
           [[0,1],[1,1],[1,0],[0,0]]
          ],
         compile:true
       });
      }
      
      
      function webGLStart() {
        // by default generate a full screen canvas with automatic resize
        var gl = CubicVR.init();
        var canvas = CubicVR.getCanvas();
        
        if (!gl) {
          alert("Sorry, no WebGL support.");
          return;
        };
        
        // New scene with our canvas dimensions and default camera with FOV 80
        var scene = new CubicVR.Scene(canvas.width, canvas.height, 80);
        
        // set initial camera position and target
        scene.camera.position = [0,0, 5];
        scene.camera.target = [0, 0, 0];
        
        // Add our scene to the window resize list
        CubicVR.addResizeable(scene);
        
        // build our mesh
        var testMesh = buildMesh();
        // construct a SceneObject and bind the mesh to it
        var sceneObject = new CubicVR.SceneObject({mesh: testMesh});
        
        // bind our sceneObject to the scene
        scene.bind(sceneObject);
        
        // Add a simple directional light
      var light1 = new CubicVR.Light({
           type: "point",
           method: "dynamic",
           diffuse: [1,1,1],
           specular: [1,1,1],
           position: [-5,-5,-10],
           distance: 50
        });
         var light2 = new CubicVR.Light({
           type: "point",
           method: "dynamic",
           diffuse: [1,1,1],
           specular: [1,1,1],
           position: [5 ,5,-10],
           distance: 50
        });
         var light3 = new CubicVR.Light({
           type: "point",
           method: "dynamic",
           diffuse: [1,1,1],
           specular: [1,1,1],
           position: [-5,5,-10],
           distance: 50
        });
          var light5 = new CubicVR.Light({
           type: "point",
           method: "dynamic",
           diffuse: [1,1,1],
           specular: [1,1,1],
           position: [0,0,10],
           distance: 50
        });
         var light6 = new CubicVR.Light({
           type: "point",
           method: "dynamic",
           diffuse: [1,1,1],
           specular: [1,1,1],
           position: [-5,0,10],
           distance: 50
        });
        
        scene.bindLight(light1);
         scene.bindLight(light2);
         scene.bindLight(light3);
         scene.bindLight(light5);
        scene.bindLight(light6);
        
        // initialize a mouse view controller
        var mvc = new CubicVR.MouseViewController(canvas, scene.camera);
        
        // Start our main drawing loop, it provides a timer and the gl context as parameters
        CubicVR.MainLoop(function(timer, gl) {
          scene.render();
        });
      }
    </script>
  </head>
  <body onLoad="webGLStart();"></body>
</html>
